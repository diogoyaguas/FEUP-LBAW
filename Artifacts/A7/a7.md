# A7: High-level architecture. Privileges. Web resources specification

***aurora*** is an online countryside store. Our main purpose is selling products so people can experience outside life and outdoor activities with the products they need.

The architecture of the web application to develop is documented indicating the catalog of resources and the properties of each resource, including references to the graphical interfaces, and the format of JSON responses. This page presents the documentation for **aurora**, including the following operations over data: create, read, update, and delete.

### Index

[1. Overview](#ov)

[2. Permissions](#pr)

[3. Modules](#md)

* [3.1 Authentication and User profile](#aup)

* [3.2 Products and Categories](#prod)

* [3.3 Product and Reviews](#prodrev)

* [3.4 Cart](#cart)

* [3.5 Management Area](#manag)

* [3.6 Static Pages](#static)

[4. JSON/XML Types](#json)

## 1. <a name="ov">Overview</a>

An overview of the web application to implement is presented in this section, where the modules are identified and briefly described. The web resources associated with each module are detailed in the individual documentation of each module.

|                                          |                                                                                                                                                                                                                           |
|------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **M01**: Authentication and User profile | Web resources associated with user authentication and individual profile management, includes the following system features: login/logout, registration, credential recovery, view and edit personal profile information. |
|             **M02**: Products and Categories            | Web resources associated with products, includes the following system features: product list and search, view/edit products details, delete and add products.                                                             |
|         **M03**: Product and Reviews|  |     Web resources associated with products, includes the following system features: product informations and their corresponding reviews and scores. |                                                                                                         |
|       **M04**: Cart      | Web resources associated with carts, includes the following features: add and remove from cart.                                           |
| **M05**: Management Area | Web resources associated with users administration and overall order management, includes the following features: change order's status, remove and warn a user.    
| **M05**: Static Pages |Web resources with static content are associated with this module:  about and FAQ.               |

## 2. <a name="pr">Permissions</a>

This section defines the permissions used in the modules to establish the conditions of access to resources.

|         |               |                                                                    |
|---------|---------------|--------------------------------------------------------------------|
| **PUB** | Public        | Users with basic privileges.                                       |
| **USR** | User          | Authenticated user.                                                |
| **OWN** | Owner         | Users who are owners of the information, such as, a review owner.  |
| **ADM** | Administrator | Administrators.                                                    |
| **STR** | Store Manager | Store Manager.                                                     |

## 3. <a name="md">Modules</a>

This section documents each web resource of each module, indicating the URL, HTTP methods, the possible parameters (mandatory or optional), body request, interfaces with the user (referring to the [A3 artefact](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3)), or JSON responses in the event of AJAX call to the API.

### 3.1 <a name="aup">Authentication and User profile</a>

| **Endpoints of Module  Authentication and User profile** |                              |
|----------------------------------------------------------|------------------------------|
| **[R101: Login Form](#r101)**                            | [```/login```]               |
| **[R102: Login Action](#r102)**                          | [```/login```]               |
| **[R103: Logout Action](#r103)**                         | [```/logout```]              |
| **[R104: Register Form](#r104)**                         | [```/register```]            |
| **[R105: Register Action](#r105)**                       | [```/register```]            |
| **[R106: View Profile](#r106)**                          | [```/profile/{id}```]        |
| **[R107: Edit Profile Form](#r107)**                     | [```/profile/{id}/edit ```]  |
| **[R108: Edit Profile Action](#108)**                    | [```/profile/{id}/edit```]        |
| **[R109: Cancel Account Action](#r109)**                 | [```/profile/{id}/cancel```]      |
| **[R110: Add Address Action](#r110)**                    | [```/profile/{id}/address```]     |
| **[R111: Delete Address Action](#r111)**                 | [```/profile/{id}/address```]     |

####  <a name="r101">R101: Login Form</a>

| **URL**         | ```/login```                                                            |
|-----------------|-------------------------------------------------------------------------|
| **Description** | Page with login form to user account.                                   |
| **Method**      | GET                                                                     |
| **UI**          | [UI04](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#ui04-sign-in) |
| **Submit**      | [R102](#r102)                                                           |
| **Permissions** | PUB                                                                     |

####  <a name ="r102">R102: Login Action</a>

| **URL**          | ```/login ```                                                                  |
|------------------|--------------------------------------------------------------------------------|
| **Description**  | This web resource logs the user into the system. Redirects to the user homepage on success and the login form on failure.   |
| **Method**       | POST                                                                           |
| **Request Body** | +name: string → username <br/> +password: string → password                    |
| **Redirects**    | Error → [R101](#r101) <br/> Success → [UI101](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#homepage) |
| **Permissions**  | PUB                                                                            |

#### <a name="r103">R103: Logout Action</a>

| **URL**         | ```/logout```                                                                  |
|-----------------|--------------------------------------------------------------------------------|
| **Description** | This web resource logs out an user from the system                             |
| **Method**      | POST                                                                           |
| **Redirects**   | Success → [UI101](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#homepage) |
| **Permissions** | USR, ADM, STR                                                                  |

#### <a name="r104"> 104: Register Form</a>

| **URL**         | ```/register```                                                     |
|-----------------|---------------------------------------------------------------------|
| **Description** | Page with register form to register a new user account              |
| **Method**      | GET                                                                 |
| **UI**          | [UI05](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#register) |
| **Submit**      | [R105](#r105)                                                       |
| **Permissions** | PUB                                                                 |

####  <a name ="r105">R105: Register Action</a>

| **URL**          | ```/register```                                                                                                                 |
|------------------|---------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | This web resource inserts the user into the system. Redirects to the user homepage on success and the register form on failure. |
| **Method**       | POST                                                                                                                            |
| **Request Body** | +name: string → username <br/> +email: string → email <br/> +password: string → password                                        |
| **Submit**       | Error → [R104](#r104) <br/> Success → [UI101](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#homepage)                      |
| **Permissions**  | PUB                                                                                                                             |

#### <a name="r106">R106: View Profile</a>

| **URL**          | ```/users/{id}```                                                                                                                                                                               |
|------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Shows the user profile                                                                                                                                                                          |
| **Method**       | GET                                                                                                                                                                                             |
| **Parameters**   | +id: integer -> user primary key                                                                                                                                                                |
| **UI**           | [UI08](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#profile)                                                                                                                              |
| **Permissions**  | USR                                                                                                                                                                                             |
| **Observations** | Whenever the user clicks on the "delete account" button, the action [R109](#r109) is called <br/> Whenever the user clicks on a purchased/favorite product, the product page is open as in RXXX |

#### <a name="r107">R107: Edit Profile Form</a>

| **URL**         | ```/profile/{id}/edit```                                           |
|-----------------|--------------------------------------------------------------------|
| **Description** | Page with a form to edit profile info.                             |
| **Method**      | GET                                                                |
| **Parameters**  | +id: integer → user primary key                                    |
| **UI**          | [UI08](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#profile) |
| **SUBMIT**      | [R108](#r108)                                                      |
| **Permissions** | OWN                                                                |

#### <a name="r108">R108: Edit Profile Action</a>

| **URL**          | ```/profile/{id}```                                                                                                                                                                                          |
|------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Web resource that changes user profile info based on the input received. Redirects to the user profile on success and edit profile page on failure. To set a new password, password field should be filled   |
| **Method**       | POST                                                                                     |
| **Parameters**   |  +id: integer → user primary key                                                         |  
| **Request Body** |?name: string → New name <br/> ?username: string → New username <br/> ?email: string → New email <br/> ?password: string → password <br/> ?newPassoword → new password |
| **Redirects**    | Error → [R107](#r107) <br/> Success → [R106](#r106)                                                                                                                                                          |
| **Permissions**  | OWN                                                                                                                                                                                                          |

#### <a name="r109">R109: Cancel Account Action</a>

| **URL**          | ```/profile/{id}/cancel```                                                                                                                                           |
|------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | This web resource removes basic user information that will no longer be necessary. Redirects to the Homepage on success and to the user profile page on failure |
| **Method**       | PUT                                                   |
| **Parameters** | +id: integer → user primary key                         |
| **Redirects**    | Error → [UI08](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#profile) <br/> Success → [UI01](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#homepage) |
| **Permissions**  | OWN                                                                                                                                                             |

#### <a name="r110">R110: Add Address Action</a>

| **URL**           | ```/profile/{id}/address```                                                                                                                                                |
|-------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**   | This web resource adds an user's address based on the input received. Redirects to the user profile either on success or on failure, showing a message in both cases. |
| **Method**        | POST |
| **Parameters** | +id: integer → user primary key |
| **Request Body**  | +street: string → street <br/> +zipCode: string → Zip Code <br/> +city: string → City <br/> +country: string → Country             |
| **Response body** | [JSON101](#j101)                                                                                                                                                               |
| **Permissions**   | OWN                                                                                                                                                                   |

#### <a name="r111">R111: Delete  Address Action</a>

| **URL**          | ```/profile/{id}/address```                                                                                                                        |
|------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Web resource that archives a user's address. Redirects to the user profile either on success or on failure, showing a message in both cases. |
| **Method**       | DELETE                                                                                                                                        |
| **Parameters** | +id: integer → address primary key                                                                                                            |
| **Returns**      | 200 OK → The address was successfully updated as archived. <br/> 404 Not Found Error → There's not an address with the specified primary key  |
| **Permissions**  | OWN                                                                                                                                           |

### 3.2 <a name="prod">Products and Categories</a>

| **Endpoints of Module Products and Categories**          |                              |
|----------------------------------------------------------|------------------------------|
| **[R201: Homepage products](#r201)**                     | [```/products/{category}```] |
| **[R202: Search action](#r204)**                         | [```/products/{search}```]   |
| **[R203: Filter products](#r206)**                       | [```/api/products```]            |

#### <a name="r201">R201: Homepage products</a>

| **URL**         | ```/products/{category}```                                              |
|-----------------|-------------------------------------------------------------------------|
| **Description** | Web resource that show the user the products of a category              |
| **Method**      | GET                                                                     |
| **UI**          |  [UI06](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#categories)  |
| **Parameters**  | +category: string → Category <br> ?product → Product                    |
| **Permissions** | PUB                                                                     |

#### <a name="r202">R202: Search action</a>

| **URL**         | ```/products/{search}```                                                |
|-----------------|-------------------------------------------------------------------------|
| **Description** | Web resource that show the user the products of a category              |
| **Method**      | GET                                                                     |
| **UI**          |  [UI06](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#categories)  |
| **Parameters**  | +search: string → Search <br>                                           |
| **Permissions** | PUB                                                                     |

#### <a name="r203">R203: Filter products</a>

| **URL**         | ```/api/products```                                              |
|-----------------|-------------------------------------------------------------------------|
| **Description** | Web resource that searches the query in the system and returns the results |
| **Method**      | GET                                                                     |
| **Parameters**  | ?filters: string → FIlters to search the products in the system         |
| **Response Body** | [JSON201](#j201) |
| **Permissions** | PUB                                                                     |


### 3.3 <a name="prodrev">Product and Reviews</a>

| **Endpoints of Module Product and Reviews** |                                                      |
|---------------------------------------------|------------------------------------------------------|
| **[R301: Product Page](#r301)**             | [```/product/{id}```]                                |
| **[R302: Add to Cart Action](#r302)**       | [```/api/users/{id_user]/cart/products/{id}```]      |
| **[R303: Add to Favorites Action](#r303)**  | [```/api/users/{id_user}/products/{id_product}``` ]  |
| **[R304: Add Review Action](#r304)**        | [```/api/product/{id_product}/review```]             |
| **[R305: Delete Review Action](#r305)**     | [```/api/product/{id_product}/review/{id_review}```] |
| **[R306: Add Product Form](#r306)**         | [```/product```]                                     |
| **[R307: Add Product Action](#r307)**       | [```/product```]                                     |
| **[R308: Edit Product Form](#308)**         | [```/product/{id}/edit```]                           |
| **[R309: Edit Product Action](#r309)**      | [```/product/{id}/edit```]                           |

#### <a name="r301"> R301: Product Page </a>

| **URL**         | ```/products/{id}```                                                    |
|-----------------|-------------------------------------------------------------------------|
| **Description** | Web resource that show the user the details of a product                |
| **Method**      | GET                                                                     |
| **UI**          |  [UI07](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#product)     |
| **Parameters**  | +id: string → primary key of product <br>                               |
| **Permissions** | PUB                                                                     |
                                                         
#### <a name="r302"> R302: Add to cart Action </a>

| **URL**         | ```/api/users/{id_user]/cart/products/{id}```                                                                                                                             |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description** | Web resource that add the product to the cart of an user                                                                                                                  |
| **Method**      | POST                                                                                                                                                                      |
| **UI**          | [UI07](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#product)                                                                                                        |
| **Parameters**  | +id: string → primary key of product   <br> +id_user → primary key of user                                                                                                |
| **Returns**     | 200 OK → Added successfully <br> 400 BAD REQUEST → Error. Error message is specified via a HTTP header. <br> 404 → NOT FOUND. User or product PK not exists in the system |
| **Permissions** | USR                                                                                                                                                                       |

#### <a name="r303"> R303: Add to Favorites Action </a> 

| **URL**         | ```/api/users/{id_user}/products/{id_product}```                                                                                                                          |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description** | Web resource that add the product to the favorites of an user                                                                                                             |
| **Method**      | POST                                                                                                                                                                      |
| **Parameters**  | +id_product: string → primary key of product   <br> +id_user → primary key of user                                                                                        |
| **Returns**     | 200 OK → Added successfully <br> 400 BAD REQUEST → Error. Error message is specified via a HTTP header. <br> 404 → NOT FOUND. User or product PK not exists in the system |
| **Permissions** | USR                                                                                                                                                                       |

#### <a name="r304"> R304: Add Review Action </a> 

| **URL**           | ```/api/product/{id_product}/review```                                                                                                                                    |
|-------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**   | Web resource that add a review in the system                                                                                                                              |
| **Method**        | POST                                                                                                                                                                      |
| **Parameters**    | +id_poduct → primary key of product                                                                                                                                       |
| **Request Body**  | +id_user → primary key of user <br> +comment: string → Comment <br> +value: Integer → Rate                                                                                |
| **Return**        | 200 OK → Added successfully <br> 400 BAD REQUEST → Error. Error message is specified via a HTTP header. <br> 404 → NOT FOUND. User or product PK not exists in the system |
| **Response Body** | [JSON301](#j301)                                                                                                                                                                      |
| **Permissions**   | USR                                                                                                                                                                       |

#### <a name="r305"> R305: Delete Review Action </a> 

| **URL**         | ```/api/product/{id_product}/review/{id_review}```                                                                                                                          |
|-----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description** | Web resource that deletes a review from the system                                                                                                                          |
| **Method**      | DELETE                                                                                                                                                                      |
| **Parameters**  | +id_product: string → primary key of product   <br> +id_review → primary key of review                                                                                      |
| **Returns**     | 200 OK → removed successfully <br> 400 BAD REQUEST → Error. Error message is specified via a HTTP header. <br> 404 → NOT FOUND. User or product PK not exists in the system |
| **Permissions** | OWN, ADM                                                                                                                                                                    |

#### <a name="r306"> R306: Add Product Form </a> 

| **URL**         | ```/product```                                                     |
|-----------------|--------------------------------------------------------------------|
| **Description** | Page with form to add a product                                    |
| **Method**      | GET                                                                |
| **UI**          | [UI11](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#manager) |
| **SUBMIT**      | [R307](#r307)                                                      |
| **Permissions** | STR                                                                |

#### <a name="r307"> R307: Add Product Action </a>

| **URL**          | ```/product```                                                                                                                                                                                                                                                                                |
|------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Web resource that add a product to the store                                                                                                                                                                                                                                                  |
| **Method**       | POST                                                                                                                                                                                                                                                                                          |
| **Request Body** | +name: string → Name of the Product   <br> +price: Float → Price <br> + description: string → Description of the product <br> +stock: Integer → Quantity in stock <br> +sizes:String → Size <br> +colors: string → Color <br> +brand: String → Brand <br> +pic: file → picture of the product |
| **Returns**      | 200 OK → Added successfully <br> 400 BAD REQUEST → Error. Error message is specified via a HTTP header. <br> 404 → NOT FOUND. User or product PK not exists in the system                                                                                                                     |
| **Permissions**  | STR                                                                                                                                                                                                                                                                                           |

#### <a name="r308"> R308: Edit Product Form </a>

| **URL**         | ```/product/{id}/edit```                                           |
|-----------------|--------------------------------------------------------------------|
| **Description** | Page with form to edit a product                                   |
| **Method**      | GET                                                                |
| **Parameter**   | +id: String → Primary Key of the product                           |
| **UI**          | [UI11](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#manager) |
| **SUBMIT**      | [R309](#r309)                                                      |
| **Permissions** | STR                                                                |

#### <a name="r309"> R309: Edit Product Action </a> 

| **URL**          | ```/product/{id}/edit```                                                                                                                                                                                                                                                                 |
|------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Web resource that Edit the product information in the system                                                                                                                                                                                                                             |
| **Method**       | PUT                                                                                                                                                                                                                                                                                      |
| **Parameter**    | +id: String → Primary Key of the product                                                                                                                                                                                                                                                 |
| **Request Body** | +name: string → Name of the Product   <br> +price: Float → Price <br> + description: string → Description of the product <br> +stock: Integer → Quantity in stock <br> +sizes:String → Size <br> +colors: string → Color <br> +brand: String → Brand +pic: file → picture of the product |
| **Returns**      | 200 OK → Added successfully <br> 400 BAD REQUEST → Error. Error message is specified via a HTTP header. <br> 404 → NOT FOUND. User or product PK not exists in the system                                                                                                                |
| **Permissions**  | STR                                                                                                                                                                                                                                                                                      |

### 3.4 <a name="cart">Cart</a>

| **Endpoints of Module Cart**            |                                            |
|-----------------------------------------|--------------------------------------------|
| **[R401: Cart Form](#r401)**            | [```/cart/{id}```]                         |
| **[R402: Cart Checkout Action](#r402)** | [```/cart/{id}```]                         |
| **[R403: Cart Delete Product](#r403)**  | [```/api/cart/{id_cart}/line/{id_line}```] |

#### <a name="r401"> R401: Cart Form </a>

| **URL**         | ```/cart/{id}```                                                |
|-----------------|-----------------------------------------------------------------|
| **Description** | Page with cart                                                  |
| **Method**      | GET                                                             |
| **Parameter**   | +id: String → Primary Key of the cart                           |
| **UI**          | [UI12](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#cart) |
| **SUBMIT**      | [R402](#r402)                                                   |
| **Permissions** | USR                                                             |

#### <a name="r402"> R402: Cart Checkout Action </a>

| **URL**          | ```/cart/{id}```                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Web resource that add a product to the store                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Method**       | POST                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **Request Body** | +firstName: string → First name of the buyer for the invoice <br> +lastName: String → Last Name of the buyer for the invoice <br> +email: string → Email of the buyer for the invoice <br> +street: string → Name of the street for the invoice <br> +city: string → Name of the city for the invoice <br> +zipcode: string → ZIP ocde for the invoice <br> +country: string → Country name for the invoice <br> ?firstName: string → First name of the buyer for shipping <br> ?lastName: String → Last Name of the buyer for shipping <br> ?email: string → Email of the buyer for shipping <br> ?street: string → Name of the street for shipping <br> ?city: string → Name of the city for shipping <br> ?zipcode: string → ZIP code for shipping <br> +country: string → Country name for shipping <br> +card: Integer → Card Number <br> +expdate: date → Expiration date of the card <br> +ccv: Integer → CCV |
| **Returns**      | 200 OK → Added successfully <br> 400 BAD REQUEST → Error. Error message is specified via an HTTP header. <br> 404 → NOT FOUND. User or product PK does not exist in the system                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Permissions**  | OWN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

| **URL**         | ```/api/cart/{id_cart}/line/{id_line}```                                                                                                                                      |
|-----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description** | Web resource that deletes an item from the cart of an user                                                                                                                    |
| **Method**      | DELETE                                                                                                                                                                        |
| **Parameters**  | +id_cart: string → primary key of cart   <br> +id_line → primary key of line item                                                                                             |
| **Returns**     | 200 OK → removed successfully <br> 400 BAD REQUEST → Error. Error message is specified via a HTTP header. <br> 404 → NOT FOUND. cart or line item PK not exists in the system |
| **Permissions** | OWN                                                                                                                                                                           |

### 3.5 <a name="manag">Management Area</a>

| **Endpoints of Module Management Area**   |                                |
|-------------------------------------------|--------------------------------|
| **[R501: Admin’s page](#r501)**           | [```/admin/{id}```]            |
| **[R502: Add Employee Form](#r502)**      | [```/admin/{id}/employee```]   |
| **[R503: Add Employee Action](#r503)**    | [```/admin/{id}/employee```]   |
| **[R504: Delete Employee Action](#r504)** | [```/admin/{id}/employee```]   |
| **[R505: Delete User Action](#r505)**     | [```/admin/{id}/user```]       |
| **[R506: Store Manager's page](#r506)**   | [```/manager/{id}```]          |
| **[R507: Add Discount Form](#r507)**      | [```/manager/{id}/discount```] |
| **[R508: Add Discount Action](#r508)**    | [```/manager/{id}/discount```] |
| **[R509: Delete Discount Action](#r509)** | [```/manager/{id}/discount```] |
| **[R510: Update Order's state](#r510)** | [```/profile/{id}/order```] |

#### <a name="r501">R501: Admin’s page</a>

| **URL**          | ```/admin/{id}```                                                                                                                                                                               |
|------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Shows the administrator profile                                                                                                                                                                          |
| **Method**       | GET                                                                                                                                                                                             |
| **Parameters**   | +id: integer -> user primary key                                                                                                                                                                |
| **UI**           | [UI10](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#admin)                                                                                                                              |
| **Permissions**  | ADM                                                                                                                                                                                             |

#### <a name="r502">R502: Add Employee Form</a>

| **URL**         | ```/admin/{id}/employee```                                       |
|-----------------|------------------------------------------------------------------|
| **Description** | Page with a form to add employee.                                |
| **Method**      | GET                                                              |
| **UI**          | [UI10](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#admin) |
| **SUBMIT**      | [R503](#r503)                                                    |
| **Permissions** | ADM                                                              |
                                                           
#### <a name="r503">R503: Add Employee Action</a>

| **URL**          | ```/admin/{id}/employee```                                                                                                                                                                |
|------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Web resource that add an employee.                                                                                                                                            |
| **Method**       | POST                                                                                                                                                                          |
| **Request Body** | +name: string → Name of the Employee <br> +role: string → Role <br> +password: string → Password                                                                              |
| **Returns**      | 200 OK → Added successfully <br> 400 BAD REQUEST → Error. Error message is specified via a HTTP header. <br> 404 → NOT FOUND. User does not exist in the system |
| **Permissions**  | ADM                                                                                                                                                                           |

#### <a name="r504">R504: Delete Employee Action</a>

| **URL**          | ```/admin/{id}/employee```                                                                                                                     |
|------------------|------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Web resource that archives an employee. Redirects to the admin profile either on success or on failure, showing a message in both cases.       |
| **Method**       | DELETE                                                                                                                                         |
| **Request Body** | +id: integer → employee primary key                                                                                                            |
| **Returns**      | 200 OK → The employee was successfully updated as archived. <br/> 404 Not Found Error → There's not an employee with the specified primary key |
| **Permissions**  | ADM                                                                                                                                            |

#### <a name="r505">R505: Delete User Action</a>

| **URL**          | ```/admin/{id}/user```                                                                                                                |
|------------------|---------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Web resource that archives a user. Redirects to the admin profile either on success or on failure, showing a message in both cases.   |
| **Method**       | DELETE                                                                                                                                |
| **Request Body** | +id: integer → user primary key                                                                                                       |
| **Returns**      | 200 OK → The user was successfully updated as archived. <br/> 404 Not Found Error → There's not a user with the specified primary key |
| **Permissions**  | ADM                                                                                                                                   |

#### <a name="r506">R506: Store Manager’s page</a>

| **URL**          | ```/manager/{id}```                                                                                                                                                                               |
|------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Shows the store manager profile                                                                                                                                                                          |
| **Method**       | GET                                                                                                                                                                                             |
| **Parameters**   | +id: integer -> user primary key                                                                                                                                                                |
| **UI**           | [UI11](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#manager)                                                                                                                              |
| **Permissions**  | STR                                                                                                                                                                                             |

#### <a name="r507">R507: Add Discount Form</a>

| **URL**         | ```/manager/{id}/discount```                                       |
|-----------------|------------------------------------------------------------------|
| **Description** | Page with a form to add a discount.                                |
| **Method**      | GET                                                              |
| **UI**          | [UI11](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#manager) |
| **SUBMIT**      | [R508](#r508)                                                    |
| **Permissions** | ADM                                                              |
                                                           
#### <a name="r508">R508: Add Discount Action</a>

| **URL**          | ```/manager/{id}/discount```                                                                                                                                                                |
|------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Web resource that add a discount.                                                                                                                                            |
| **Method**       | POST                                                                                                                                                                          |
| **Request Body** | +value: float → Value of the discount <br> +condition: string → Condition to apply discount                                                                             |
| **Returns**      | 200 OK → Added successfully <br> 400 BAD REQUEST → Error. Error message is specified via a HTTP header. <br> 404 → NOT FOUND. User does not exist in the system |
| **Permissions**  | ADM                                                                                                                                                                           |

#### <a name="r509">R509: Delete Discount Action</a>

| **URL**          | ```/manager/{id}/discount```                                                                                                                     |
|------------------|------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Web resource that archives a discount. Redirects to the manager profile either on success or on failure, showing a message in both cases.       |
| **Method**       | DELETE                                                                                                                                         |
| **Request Body** | +id: integer → discount primary key                                                                                                            |
| **Returns**      | 200 OK → The discount was successfully updated as archived. <br/> 404 Not Found Error → There's not a discount with the specified primary key |
| **Permissions**  | ADM                                                                                                                                            |


#### <a name="r509">R509: Update order's status</a>

| **URL**          | ```/profile/{id}/order```                                                                                                                     |
|------------------|------------------------------------------------------------------------------------------------------------------------------------------------|
| **Description**  | Web resource that updates an order's status      |
| **Method**       | PUT|
| **Request Body** | +id: integer → order primary key <br> +id_user: integer → order user key <br> +date: String→ order's date  <br>+total: integer → order's total <br> +state: String→ order's current status                                                                                                     |
| **Returns**      | JSON501 |
| **Permissions**  | ADM                                                                                                                                            |

### 3.6 <a name="static">Static Pages</a>

| **Endpoints of Module Static Pages** |                |
|--------------------------------------|----------------|
| **[R601:FAQ](#r601)**                | [```/faq```]   |
| **[R602: About](#r602)**             | [```/about```] |

#### <a name="r601">R601: FAQ</a>

| **URL**         | ```/faq```                                                     |
|-----------------|----------------------------------------------------------------|
| **Description** | FAQ page                                                       |
| **Method**      | GET                                                            |
| **UI**          | [UI03](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#faq) |
| **Permissions** | PUB                                                            |

#### <a name="r602">R602: About</a>

| **URL**         | ```/about```                                                     |
|-----------------|------------------------------------------------------------------|
| **Description** | About us page                                                    |
| **Method**      | GET                                                              |
| **UI**          | [UI02](https://git.fe.up.pt/lbaw/lbaw18/lbaw1813/wikis/a3#about) |
| **Permissions** | PUB                                                              |

## 4. <a name="json">JSON/XML Types</a>

The structure of the JSON formatted answers must be documented as illustrated below.

#### <a name="j101">JSON101: Get address</a> {id, street, zipCode, city, country}[]

```json
{
    "id": "1",
    "street": "Grim",
    "zipCode": "446600",
    "city": "Taquara",
    "country": "Central African Republic"
}
```

#### <a name="j201">JSON201: Get filtered products</a> {products}[]

```json
{
    "products": [
      {
        "id": "3",
        "name": "Pale Indian Paintbrush",
        "price": "94.04",
        "description": "Aenean fermentum. Donec ut mauris eget massa tempor convallis. Nulla neque libero, convallis eget, 
         eleifend luctus, ultricies eu, nibh.",
        "stock": "27",
        "score": "3.6"
      },
      {
        "id": "11",
        "name": "Orange Lichen",
        "price": "75.48",
        "description": "Nam ultrices, libero non mattis pulvinar, nulla pede ullamcorper augue, a suscipit nulla elit ac 
         nulla. Sed vel enim sit amet nunc viverra dapibus. Nulla suscipit ligula in lacus.",
        "stock": "60",
        "score": "3.6"
      }
    ]
}
```

#### <a name="j301">JSON301: Get review</a> {id, title, description, score}[]

```json
{
    "id": "14",
    "title": "Morbi vel lectus in quam fringilla rhoncus.",
    "description": "Phasellus in felis. Donec semper sapien a libero. Nam dui.",
    "score": "0"
}
```
#### <a name="j501">JSON501: Get order</a> {id, id_user, date, total, state}[]

```json
{
    "id": "1",
    "id_user": "46",
    "date": "2019/01/20",
    "total": "68.3",
    "state": "Procesing"
}
```
## Revision history
Added new table regarding order's status and corresponding JSON associated
Fixed overview
<br/>

***
GROUP1813, 10/04/2019

* Carlos Daniel Gomes, up201603404@fe.up.pt
* Carolina Azevedo, up201506509@fe.up.pt
* Diogo Yaguas, up201606165@fe.up.pt
* Gonçalo Bernardo, up201606058@fe.up.pt (Editor)